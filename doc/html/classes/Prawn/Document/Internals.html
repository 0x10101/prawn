<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html 
     PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>Module: Prawn::Document::Internals</title>
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
  <meta http-equiv="Content-Script-Type" content="text/javascript" />
  <link rel="stylesheet" href="../../.././rdoc-style.css" type="text/css" media="screen" />
  <script type="text/javascript">
  // <![CDATA[

  function popupCode( url ) {
    window.open(url, "Code", "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=150,width=400")
  }

  function toggleCode( id ) {
    if ( document.getElementById )
      elem = document.getElementById( id );
    else if ( document.all )
      elem = eval( "document.all." + id );
    else
      return false;

    elemStyle = elem.style;
    
    if ( elemStyle.display != "block" ) {
      elemStyle.display = "block"
    } else {
      elemStyle.display = "none"
    }

    return true;
  }
  
  // Make codeblocks hidden by default
  document.writeln( "<style type=\"text/css\">div.method-source-code { display: none }</style>" )
  
  // ]]>
  </script>

</head>
<body>



    <div id="classHeader">
        <table class="header-table">
        <tr class="top-aligned-row">
          <td><strong>Module</strong></td>
          <td class="class-name-in-header">Prawn::Document::Internals</td>
        </tr>
        <tr class="top-aligned-row">
            <td><strong>In:</strong></td>
            <td>
                <a href="../../../files/lib/prawn/document/internals_rb.html">
                lib/prawn/document/internals.rb
                </a>
        <br />
            </td>
        </tr>

        </table>
    </div>
  <!-- banner header -->

  <div id="bodyContent">



  <div id="contextContent">

    <div id="description">
      <p>
This module exposes a few low-level PDF features for those who want to
extend <a href="../../Prawn.html">Prawn</a>&#8216;s core functionality. If
you are not comfortable with low level PDF functionality as defined by
Adobe&#8216;s specification, chances are you won&#8216;t need anything you
find here.
</p>

    </div>


   </div>

    <div id="method-list">
      <h3 class="section-bar">Methods</h3>

      <div class="name-list">
      <a href="#M000293">add_content</a>&nbsp;&nbsp;
      <a href="#M000296">before_render</a>&nbsp;&nbsp;
      <a href="#M000294">names</a>&nbsp;&nbsp;
      <a href="#M000295">names?</a>&nbsp;&nbsp;
      <a href="#M000297">on_page_create</a>&nbsp;&nbsp;
      <a href="#M000291">ref</a>&nbsp;&nbsp;
      <a href="#M000292">ref!</a>&nbsp;&nbsp;
      </div>
    </div>

  </div>


    <!-- if includes -->

    <div id="section">





      


    <!-- if method_list -->
    <div id="methods">
      <h3 class="section-bar">Public Instance methods</h3>

      <div id="method-M000293" class="method-detail">
        <a name="M000293"></a>

        <div class="method-heading">
          <a href="#M000293" class="method-signature">
          <span class="method-name">add_content</span><span class="method-args">(str)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Appends a raw string to the current page content.
</p>
<pre>
 # Raw line drawing example:
 x1,y1,x2,y2 = 100,500,300,550
 pdf.add_content(&quot;%.3f %.3f m&quot; % [ x1, y1 ])  # move
 pdf.add_content(&quot;%.3f %.3f l&quot; % [ x2, y2 ])  # draw path
 pdf.add_content(&quot;S&quot;) # stroke
</pre>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000293-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000293-source">
<pre>
<span class="ruby-comment cmt"># File lib/prawn/document/internals.rb, line 48</span>
      <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">add_content</span>(<span class="ruby-identifier">str</span>)
        <span class="ruby-identifier">state</span>.<span class="ruby-identifier">page</span>.<span class="ruby-identifier">content</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">str</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot;\n&quot;</span>
      <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000296" class="method-detail">
        <a name="M000296"></a>

        <div class="method-heading">
          <a href="#M000296" class="method-signature">
          <span class="method-name">before_render</span><span class="method-args">(&amp;block)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Defines a block to be called just before the document is rendered.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000296-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000296-source">
<pre>
<span class="ruby-comment cmt"># File lib/prawn/document/internals.rb, line 68</span>
      <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">before_render</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
        <span class="ruby-identifier">state</span>.<span class="ruby-identifier">before_render_callbacks</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">block</span>
      <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000294" class="method-detail">
        <a name="M000294"></a>

        <div class="method-heading">
          <a href="#M000294" class="method-signature">
          <span class="method-name">names</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
The Name dictionary (PDF spec 3.6.3) for this document. It is lazily
initialized, so that documents that do not need a name dictionary do not
incur the additional overhead.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000294-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000294-source">
<pre>
<span class="ruby-comment cmt"># File lib/prawn/document/internals.rb, line 56</span>
      <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">names</span>
        <span class="ruby-identifier">state</span>.<span class="ruby-identifier">store</span>.<span class="ruby-identifier">root</span>.<span class="ruby-identifier">data</span>[<span class="ruby-identifier">:Names</span>] <span class="ruby-operator">||=</span> <span class="ruby-identifier">ref!</span>(<span class="ruby-identifier">:Type</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:Names</span>)
      <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000295" class="method-detail">
        <a name="M000295"></a>

        <div class="method-heading">
          <a href="#M000295" class="method-signature">
          <span class="method-name">names?</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Returns true if the Names dictionary is in use for this document.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000295-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000295-source">
<pre>
<span class="ruby-comment cmt"># File lib/prawn/document/internals.rb, line 62</span>
      <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">names?</span>
        <span class="ruby-identifier">state</span>.<span class="ruby-identifier">store</span>.<span class="ruby-identifier">root</span>.<span class="ruby-identifier">data</span>[<span class="ruby-identifier">:Names</span>]
      <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000297" class="method-detail">
        <a name="M000297"></a>

        <div class="method-heading">
          <a href="#M000297" class="method-signature">
          <span class="method-name">on_page_create</span><span class="method-args">(&amp;block)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Defines a block to be called just before a new page is started.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000297-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000297-source">
<pre>
<span class="ruby-comment cmt"># File lib/prawn/document/internals.rb, line 74</span>
      <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">on_page_create</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">block_given?</span>
            <span class="ruby-identifier">state</span>.<span class="ruby-identifier">on_page_create_callback</span> = <span class="ruby-identifier">block</span>
         <span class="ruby-keyword kw">else</span>
            <span class="ruby-identifier">state</span>.<span class="ruby-identifier">on_page_create_callback</span> = <span class="ruby-keyword kw">nil</span>
         <span class="ruby-keyword kw">end</span>
      <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000291" class="method-detail">
        <a name="M000291"></a>

        <div class="method-heading">
          <a href="#M000291" class="method-signature">
          <span class="method-name">ref</span><span class="method-args">(data)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Creates a new Prawn::Reference and adds it to the <a
href="../Document.html">Document</a>&#8216;s object list. The <tt>data</tt>
argument is anything that Prawn::PdfObject() can convert.
</p>
<p>
Returns the identifier which points to the reference in the ObjectStore
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000291-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000291-source">
<pre>
<span class="ruby-comment cmt"># File lib/prawn/document/internals.rb, line 24</span>
      <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">ref</span>(<span class="ruby-identifier">data</span>)
        <span class="ruby-identifier">ref!</span>(<span class="ruby-identifier">data</span>).<span class="ruby-identifier">identifier</span>
      <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000292" class="method-detail">
        <a name="M000292"></a>

        <div class="method-heading">
          <a href="#M000292" class="method-signature">
          <span class="method-name">ref!</span><span class="method-args">(data)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Like <a href="Internals.html#M000291">ref</a>, but returns the actual
reference instead of its identifier.
</p>
<p>
While you can use this to build up nested references within the object
tree, it is recommended to persist only identifiers, and them provide
helper methods to look up the actual references in the ObjectStore if
needed. If you take this approach, <a
href="Snapshot.html">Prawn::Document::Snapshot</a> will probably work with
your extension
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000292-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000292-source">
<pre>
<span class="ruby-comment cmt"># File lib/prawn/document/internals.rb, line 36</span>
      <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">ref!</span>(<span class="ruby-identifier">data</span>)
        <span class="ruby-identifier">state</span>.<span class="ruby-identifier">store</span>.<span class="ruby-identifier">ref</span>(<span class="ruby-identifier">data</span>)
      <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>


    </div>


  </div>


<div id="validator-badges">
  <p><small><a href="http://validator.w3.org/check/referer">[Validate]</a></small></p>
</div>

</body>
</html>