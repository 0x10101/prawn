<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html 
     PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>Class: Prawn::Outline</title>
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
  <meta http-equiv="Content-Script-Type" content="text/javascript" />
  <link rel="stylesheet" href="../.././rdoc-style.css" type="text/css" media="screen" />
  <script type="text/javascript">
  // <![CDATA[

  function popupCode( url ) {
    window.open(url, "Code", "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=150,width=400")
  }

  function toggleCode( id ) {
    if ( document.getElementById )
      elem = document.getElementById( id );
    else if ( document.all )
      elem = eval( "document.all." + id );
    else
      return false;

    elemStyle = elem.style;
    
    if ( elemStyle.display != "block" ) {
      elemStyle.display = "block"
    } else {
      elemStyle.display = "none"
    }

    return true;
  }
  
  // Make codeblocks hidden by default
  document.writeln( "<style type=\"text/css\">div.method-source-code { display: none }</style>" )
  
  // ]]>
  </script>

</head>
<body>



    <div id="classHeader">
        <table class="header-table">
        <tr class="top-aligned-row">
          <td><strong>Class</strong></td>
          <td class="class-name-in-header">Prawn::Outline</td>
        </tr>
        <tr class="top-aligned-row">
            <td><strong>In:</strong></td>
            <td>
                <a href="../../files/lib/prawn/outline_rb.html">
                lib/prawn/outline.rb
                </a>
        <br />
            </td>
        </tr>

        <tr class="top-aligned-row">
            <td><strong>Parent:</strong></td>
            <td>
                Object
            </td>
        </tr>
        </table>
    </div>
  <!-- banner header -->

  <div id="bodyContent">



  <div id="contextContent">

    <div id="description">
      <p>
The <a href="Outline.html">Outline</a> class organizes the outline tree
items for the document. Note that the prev and parent instance variables
are adjusted while navigating through the nested blocks. These variables
along with the presence or absense of blocks are the primary means by which
the relations for the various OutlineItems and the OutlineRoot are set.
Unfortunately, the best way to understand how this works is to follow the
method calls through a real example.
</p>
<p>
Some ideas for the organization of this class were gleaned from name_tree.
In particular the way in which the OutlineItems are finally rendered into
document objects in PdfObject through a hash.
</p>

    </div>


   </div>

    <div id="method-list">
      <h3 class="section-bar">Methods</h3>

      <div class="name-list">
      <a href="#M000205">add_section</a>&nbsp;&nbsp;
      <a href="#M000204">define</a>&nbsp;&nbsp;
      <a href="#M000206">insert_section_after</a>&nbsp;&nbsp;
      <a href="#M000203">new</a>&nbsp;&nbsp;
      </div>
    </div>

  </div>


    <!-- if includes -->

    <div id="section">





    <div id="attribute-list">
      <h3 class="section-bar">Attributes</h3>

      <div class="name-list">
        <table>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">document</td>
          <td class="context-item-value">&nbsp;[RW]&nbsp;</td>
          <td class="context-item-desc"></td>
        </tr>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">items</td>
          <td class="context-item-value">&nbsp;[RW]&nbsp;</td>
          <td class="context-item-desc"></td>
        </tr>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">outline_root</td>
          <td class="context-item-value">&nbsp;[RW]&nbsp;</td>
          <td class="context-item-desc"></td>
        </tr>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">parent</td>
          <td class="context-item-value">&nbsp;[RW]&nbsp;</td>
          <td class="context-item-desc"></td>
        </tr>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">prev</td>
          <td class="context-item-value">&nbsp;[RW]&nbsp;</td>
          <td class="context-item-desc"></td>
        </tr>
        </table>
      </div>
    </div>
      


    <!-- if method_list -->
    <div id="methods">
      <h3 class="section-bar">Public Class methods</h3>

      <div id="method-M000203" class="method-detail">
        <a name="M000203"></a>

        <div class="method-heading">
          <a href="#M000203" class="method-signature">
          <span class="method-name">new</span><span class="method-args">(document)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000203-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000203-source">
<pre>
<span class="ruby-comment cmt"># File lib/prawn/outline.rb, line 55</span>
    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">initialize</span>(<span class="ruby-identifier">document</span>)
      <span class="ruby-ivar">@document</span> = <span class="ruby-identifier">document</span>
      <span class="ruby-ivar">@outline_root</span> = <span class="ruby-identifier">document</span>.<span class="ruby-identifier">outline_root</span>(<span class="ruby-constant">OutlineRoot</span>.<span class="ruby-identifier">new</span>)
      <span class="ruby-ivar">@parent</span> = <span class="ruby-identifier">outline_root</span>
      <span class="ruby-ivar">@prev</span> = <span class="ruby-keyword kw">nil</span>
      <span class="ruby-ivar">@items</span> = {}
    <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <h3 class="section-bar">Public Instance methods</h3>

      <div id="method-M000205" class="method-detail">
        <a name="M000205"></a>

        <div class="method-heading">
          <a href="#M000205" class="method-signature">
          <span class="method-name">add_section</span><span class="method-args">(&amp;block)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Adds an outine section to the outline tree (see define_outline). Although
you will probably choose to exclusively use define_outline so that your
outline tree is contained and easy to manage, this method gives you the
option to add sections to the outline tree at any point during document
generation. Note that the section will be added at the top level at the end
of the outline. For more a more flexible API try using
outline.insert_section_after.
</p>
<p>
block uses the same DSL syntax as define_outline, for example:
</p>
<pre>
  outline.add_section do
    section 'Added Section', :page =&gt; 3 do
      page 3, :title =&gt; 'Page 3'
    end
  end
</pre>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000205-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000205-source">
<pre>
<span class="ruby-comment cmt"># File lib/prawn/outline.rb, line 121</span>
    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">add_section</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
      <span class="ruby-ivar">@parent</span> = <span class="ruby-identifier">outline_root</span>
      <span class="ruby-ivar">@prev</span> = <span class="ruby-identifier">outline_root</span>.<span class="ruby-identifier">data</span>.<span class="ruby-identifier">last</span>
      <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">block</span>
        <span class="ruby-identifier">block</span>.<span class="ruby-identifier">arity</span> <span class="ruby-operator">&lt;</span> <span class="ruby-value">1</span> <span class="ruby-operator">?</span> <span class="ruby-identifier">instance_eval</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>) <span class="ruby-operator">:</span> <span class="ruby-identifier">block</span>[<span class="ruby-keyword kw">self</span>]
      <span class="ruby-keyword kw">end</span>      
    <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000204" class="method-detail">
        <a name="M000204"></a>

        <div class="method-heading">
          <a href="#M000204" class="method-signature">
          <span class="method-name">define</span><span class="method-args">(&amp;block)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Defines an outline for the document. The outline is an optional nested
index that appears on the side of a PDF document usually with direct links
to pages. The outline DSL is defined by nested blocks involving two
methods: section and page.
</p>
<p>
section(title, options{}, &amp;block)
</p>
<pre>
  title: the outline text that appears for the section.
  options: page - optional integer defining the page number for a destination link.
                - currently only :FIT destination supported with link to top of page.
           closed - whether the section should show its nested outline elements.
                  - defaults to false.
</pre>
<p>
page(page, options{})
</p>
<pre>
  page: integer defining the page number for the destination link.
        currently only :FIT destination supported with link to top of page.
        set to nil if destination link is not desired.
  options: title - the outline text that appears for the section.
           closed - whether the section should show its nested outline elements.
                  - defaults to false.
</pre>
<p>
The syntax is best illustrated with an example:
</p>
<p>
<a href="Document.html#M000247">Prawn::Document.generate</a>(outlined
document) do
</p>
<pre>
  text &quot;Page 1. This is the first Chapter. &quot;
  start_new_page
  text &quot;Page 2. More in the first Chapter. &quot;
  start_new_page
  define_outline do
    section 'Chapter 1', :page =&gt; 1, :closed =&gt; true do
      page 1, :title =&gt; 'Page 1'
      page 2, :title =&gt; 'Page 2'
    end
  end
</pre>
<p>
end
</p>
<p>
It should be noted that not defining a title for a page element will raise
a RequiredOption error
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000204-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000204-source">
<pre>
<span class="ruby-comment cmt"># File lib/prawn/outline.rb, line 100</span>
    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">define</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
      <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">block</span>
        <span class="ruby-identifier">block</span>.<span class="ruby-identifier">arity</span> <span class="ruby-operator">&lt;</span> <span class="ruby-value">1</span> <span class="ruby-operator">?</span> <span class="ruby-identifier">instance_eval</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>) <span class="ruby-operator">:</span> <span class="ruby-identifier">block</span>[<span class="ruby-keyword kw">self</span>]
      <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000206" class="method-detail">
        <a name="M000206"></a>

        <div class="method-heading">
          <a href="#M000206" class="method-signature">
          <span class="method-name">insert_section_after</span><span class="method-args">(title, &amp;block)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Inserts an outline section to the outline tree (see define_outline).
Although you will probably choose to exclusively use define_outline so that
your outline tree is contained and easy to manage, this method gives you
the option to insert sections to the outline tree at any point during
document generation. Unlike outline.add_section, this method allows you to
enter a section after any other item at any level in the outline tree.
Currently the only way to locate the place of entry is with the title for
the item. If your titles names are not unique consider using
define_outline.
</p>
<p>
block uses the same DSL syntax as define_outline, for example:
</p>
<pre>
  go_to_page 2
  start_new_page
  text &quot;Inserted Page&quot;
  outline.insert_section_after :title =&gt; 'Page 2' do
    page page_number, :title =&gt; &quot;Inserted Page&quot;
  end
</pre>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000206-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000206-source">
<pre>
<span class="ruby-comment cmt"># File lib/prawn/outline.rb, line 147</span>
    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">insert_section_after</span>(<span class="ruby-identifier">title</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
      <span class="ruby-ivar">@prev</span> = <span class="ruby-identifier">items</span>[<span class="ruby-identifier">title</span>]
      <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@prev</span>
        <span class="ruby-ivar">@parent</span> = <span class="ruby-ivar">@prev</span>.<span class="ruby-identifier">data</span>.<span class="ruby-identifier">parent</span>
        <span class="ruby-identifier">nxt</span> = <span class="ruby-ivar">@prev</span>.<span class="ruby-identifier">data</span>.<span class="ruby-identifier">next</span>
        <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">block</span>
          <span class="ruby-identifier">block</span>.<span class="ruby-identifier">arity</span> <span class="ruby-operator">&lt;</span> <span class="ruby-value">1</span> <span class="ruby-operator">?</span> <span class="ruby-identifier">instance_eval</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>) <span class="ruby-operator">:</span> <span class="ruby-identifier">block</span>[<span class="ruby-keyword kw">self</span>]
        <span class="ruby-keyword kw">end</span>
        <span class="ruby-identifier">adjust_relations</span>(<span class="ruby-identifier">nxt</span>)
      <span class="ruby-keyword kw">else</span>
        <span class="ruby-identifier">raise</span> <span class="ruby-constant">Prawn</span><span class="ruby-operator">::</span><span class="ruby-constant">Errors</span><span class="ruby-operator">::</span><span class="ruby-constant">UnknownOutlineTitle</span>, 
          <span class="ruby-node">&quot;\n No outline item with title: '#{title}' exists in the outline tree&quot;</span>
      <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>


    </div>


  </div>


<div id="validator-badges">
  <p><small><a href="http://validator.w3.org/check/referer">[Validate]</a></small></p>
</div>

</body>
</html>