<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
	"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
	<meta content="text/html; charset=utf-8" http-equiv="Content-Type" />

	<title>Module: Prawn::Text</title>

	<link rel="stylesheet" href="../rdoc.css" type="text/css" media="screen" />

	<script src="../js/jquery.js" type="text/javascript"
		charset="utf-8"></script>
	<script src="../js/thickbox-compressed.js" type="text/javascript"
		charset="utf-8"></script>
	<script src="../js/quicksearch.js" type="text/javascript"
		charset="utf-8"></script>
	<script src="../js/darkfish.js" type="text/javascript"
		charset="utf-8"></script>

</head>
<body class="module">

	<div id="metadata">
		<div id="home-metadata">
			<div id="home-section" class="section">
        <h3 class="section-header">
          <a href="../index.html">Home</a>
          <a href="../index.html#classes">Classes</a>
          <a href="../index.html#methods">Methods</a>
        </h3>
			</div>
		</div>

		<div id="file-metadata">
			<div id="file-list-section" class="section">
				<h3 class="section-header">In Files</h3>
				<div class="section-body">
					<ul>
					
						<li><a href="../lib/prawn/text/box_rb.html?TB_iframe=true&amp;height=550&amp;width=785"
							class="thickbox" title="lib/prawn/text/box.rb">lib/prawn/text/box.rb</a></li>
					
						<li><a href="../lib/prawn/text_rb.html?TB_iframe=true&amp;height=550&amp;width=785"
							class="thickbox" title="lib/prawn/text.rb">lib/prawn/text.rb</a></li>
					
					</ul>
				</div>
			</div>

			
		</div>

		<div id="class-metadata">

			<!-- Parent Class -->
			

			<!-- Namespace Contents -->
			
			<div id="namespace-list-section" class="section">
				<h3 class="section-header">Namespace</h3>
				<ul class="link-list">
					
					<li><span class="type">CLASS</span> <a href="Text/Box.html">Prawn::Text::Box</a></li>
					
					<li><span class="type">CLASS</span> <a href="Text/LineWrap.html">Prawn::Text::LineWrap</a></li>
					
				</ul>
			</div>
			

			<!-- Method Quickref -->
			
			<div id="method-list-section" class="section">
				<h3 class="section-header">Methods</h3>
				<ul class="link-list">
					
					<li><a href="#method-i-draw_indented_line">#draw_indented_line</a></li>
					
					<li><a href="#method-i-draw_remaining_text_on_new_pages">#draw_remaining_text_on_new_pages</a></li>
					
					<li><a href="#method-i-draw_text">#draw_text</a></li>
					
					<li><a href="#method-i-fill_text_box">#fill_text_box</a></li>
					
					<li><a href="#method-i-height_of">#height_of</a></li>
					
					<li><a href="#method-i-inspect_options_for_draw_text">#inspect_options_for_draw_text</a></li>
					
					<li><a href="#method-i-inspect_options_for_text">#inspect_options_for_text</a></li>
					
					<li><a href="#method-i-move_text_position">#move_text_position</a></li>
					
					<li><a href="#method-i-process_final_gap_option">#process_final_gap_option</a></li>
					
					<li><a href="#method-i-process_indent_paragraphs_option">#process_indent_paragraphs_option</a></li>
					
					<li><a href="#method-i-text">#text</a></li>
					
					<li><a href="#method-i-text_box">#text_box</a></li>
					
				</ul>
			</div>
			

			<!-- Included Modules -->
			
			<div id="includes-section" class="section">
				<h3 class="section-header">Included Modules</h3>
				<ul class="link-list">
				
				
					<li><a class="include" href="Core/Text.html">Prawn::Core::Text</a></li>
				
				
				</ul>
			</div>
			
		</div>

		<div id="project-metadata">
			
			

			<div id="classindex-section" class="section project-section">
				<h3 class="section-header">Class Index
					<span class="search-toggle"><img src="../images/find.png"
						height="16" width="16" alt="[+]"
						title="show/hide quicksearch" /></span></h3>
				<form action="#" method="get" accept-charset="utf-8" class="initially-hidden">
				<fieldset>
					<legend>Quicksearch</legend>
					<input type="text" name="quicksearch" value=""
						class="quicksearch-field" />
				</fieldset>
				</form>

				<ul class="link-list">
				
					<li><a href="../Prawn.html">Prawn</a></li>
				
					<li><a href="../Prawn/Core.html">Prawn::Core</a></li>
				
					<li><a href="../Prawn/Document.html">Prawn::Document</a></li>
				
					<li><a href="../Prawn/Document/Annotations.html">Prawn::Document::Annotations</a></li>
				
					<li><a href="../Prawn/Document/BoundingBox.html">Prawn::Document::BoundingBox</a></li>
				
					<li><a href="../Prawn/Document/ColumnBox.html">Prawn::Document::ColumnBox</a></li>
				
					<li><a href="../Prawn/Document/Destinations.html">Prawn::Document::Destinations</a></li>
				
					<li><a href="../Prawn/Document/GraphicsState.html">Prawn::Document::GraphicsState</a></li>
				
					<li><a href="../Prawn/Document/Internals.html">Prawn::Document::Internals</a></li>
				
					<li><a href="../Prawn/Document/PageGeometry.html">Prawn::Document::PageGeometry</a></li>
				
					<li><a href="../Prawn/Document/Snapshot.html">Prawn::Document::Snapshot</a></li>
				
					<li><a href="../Prawn/Encoding.html">Prawn::Encoding</a></li>
				
					<li><a href="../Prawn/Errors.html">Prawn::Errors</a></li>
				
					<li><a href="../Prawn/Font.html">Prawn::Font</a></li>
				
					<li><a href="../Prawn/Font/AFM.html">Prawn::Font::AFM</a></li>
				
					<li><a href="../Prawn/Font/DFont.html">Prawn::Font::DFont</a></li>
				
					<li><a href="../Prawn/Font/TTF.html">Prawn::Font::TTF</a></li>
				
					<li><a href="../Prawn/Graphics.html">Prawn::Graphics</a></li>
				
					<li><a href="../Prawn/Graphics/CapStyle.html">Prawn::Graphics::CapStyle</a></li>
				
					<li><a href="../Prawn/Graphics/Color.html">Prawn::Graphics::Color</a></li>
				
					<li><a href="../Prawn/Graphics/Dash.html">Prawn::Graphics::Dash</a></li>
				
					<li><a href="../Prawn/Graphics/JoinStyle.html">Prawn::Graphics::JoinStyle</a></li>
				
					<li><a href="../Prawn/Graphics/Transformation.html">Prawn::Graphics::Transformation</a></li>
				
					<li><a href="../Prawn/Graphics/Transparency.html">Prawn::Graphics::Transparency</a></li>
				
					<li><a href="../Prawn/Images.html">Prawn::Images</a></li>
				
					<li><a href="../Prawn/Images/JPG.html">Prawn::Images::JPG</a></li>
				
					<li><a href="../Prawn/Images/PNG.html">Prawn::Images::PNG</a></li>
				
					<li><a href="../Prawn/Measurements.html">Prawn::Measurements</a></li>
				
					<li><a href="../Prawn/Outline.html">Prawn::Outline</a></li>
				
					<li><a href="../Prawn/Stamp.html">Prawn::Stamp</a></li>
				
					<li><a href="../Prawn/Text.html">Prawn::Text</a></li>
				
					<li><a href="../Prawn/Text/Box.html">Prawn::Text::Box</a></li>
				
					<li><a href="../Prawn/Text/LineWrap.html">Prawn::Text::LineWrap</a></li>
				
					<li><a href="../File.html">File</a></li>
				
					<li><a href="../Numeric.html">Numeric</a></li>
				
				</ul>
				<div id="no-class-search-results" style="display: none;">No matching classes.</div>
			</div>

			
		</div>
	</div>

	<div id="documentation">
		<h1 class="module">Prawn::Text</h1>

		<div id="description">
			
		</div>

		<!-- Constants -->
		
		<div id="constants-list" class="section">
			<h3 class="section-header">Constants</h3>
			<dl>
			
				<dt><a name="VALID_OPTIONS">VALID_OPTIONS</a></dt>
				
				<dd class="description"></dd>
				
			
			</dl>
		</div>
		

		<!-- Attributes -->
		

		<!-- Methods -->
		
		<div id="public-instance-method-details" class="method-section section">
			<h3 class="section-header">Public Instance Methods</h3>

		
			<div id="draw-text-method" class="method-detail ">
				<a name="method-i-draw_text"></a>

				<div class="method-heading">
				
					<span class="method-name">draw_text</span><span
						class="method-args">(text, options)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Draws text on the page, beginning at the point specified by the :at option
the string is assumed to be pre-formatted to properly fit the page.
</p>
<pre>
  pdf.draw_text &quot;Hello World&quot;, :at =&gt; [100,100]
  pdf.draw_text &quot;Goodbye World&quot;, :at =&gt; [50,50], :size =&gt; 16
</pre>
<p>
If your font contains kerning pairs data that <a
href="../Prawn.html">Prawn</a> can parse, the  text will be kerned by
default.  You can disable this feature by passing <tt>:kerning =&gt;
false</tt>.
</p>
<h3><a href="Text.html">Text</a> Positioning Details:</h3>
<p>
<a href="../Prawn.html">Prawn</a> will position your text by the left-most
edge of its baseline, and flow along a single line.  (This means that
:align will not work)
</p>
<h2>Rotation</h2>
<p>
<a href="Text.html">Text</a> can be rotated before it is placed on the
canvas by specifying the <tt>:rotate</tt> option with a given angle.
Rotation occurs counter-clockwise.
</p>
<h2><a href="Encoding.html">Encoding</a></h2>
<p>
Note that strings passed to this function should be encoded as UTF-8. If
you get unexpected characters appearing in your rendered document,  check
this.
</p>
<p>
If the current font is a built-in one, although the string must be encoded
as UTF-8, only characters that are available in WinAnsi are allowed.
</p>
<p>
If an empty box is rendered to your PDF instead of the character you 
wanted it usually means the current font doesn&#8217;t include that
character.
</p>
<h2>Options (default values marked in [])</h2>
<table>
<tr><td valign="top"><tt>:at</tt></td><td><p>
<tt>[x, y]</tt>(required). The position at which to start the text
</p>
</td></tr>
<tr><td valign="top"><tt>:kerning</tt></td><td><p>
<tt>boolean</tt>. Whether or not to use kerning (if it is available with
the current font) [true]
</p>
</td></tr>
<tr><td valign="top"><tt>:size</tt></td><td><p>
<tt>number</tt>. The font size to use. [current font size]
</p>
</td></tr>
<tr><td valign="top"><tt>:style</tt></td><td><p>
The style to use. The requested style must be part of the current font
familly. [current style]
</p>
</td></tr>
<tr><td valign="top"><tt>:rotate</tt></td><td><p>
<tt>number</tt>. The angle to which to rotate text
</p>
</td></tr>
</table>
<p>
Raises <tt>ArgumentError</tt> if <tt>:at</tt> option omitted Raises
<tt>ArgumentError</tt> if <tt>:align</tt> option included
</p>
					

					
					<div class="method-source-code"
						id="draw-text-source">
<pre>
     <span class="ruby-comment cmt"># File lib/prawn/text.rb, line 185</span>
185:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">draw_text</span>(<span class="ruby-identifier">text</span>, <span class="ruby-identifier">options</span>)
186:       <span class="ruby-comment cmt"># we modify the options. don't change the user's hash</span>
187:       <span class="ruby-identifier">options</span> = <span class="ruby-identifier">options</span>.<span class="ruby-identifier">dup</span>
188:       <span class="ruby-identifier">inspect_options_for_draw_text</span>(<span class="ruby-identifier">options</span>)
189:       <span class="ruby-comment cmt"># dup because normalize_encoding changes the string</span>
190:       <span class="ruby-identifier">text</span> = <span class="ruby-identifier">text</span>.<span class="ruby-identifier">to_s</span>.<span class="ruby-identifier">dup</span>
191:       <span class="ruby-identifier">options</span> = <span class="ruby-ivar">@text_options</span>.<span class="ruby-identifier">merge</span>(<span class="ruby-identifier">options</span>)
192:       <span class="ruby-identifier">save_font</span> <span class="ruby-keyword kw">do</span>
193:         <span class="ruby-identifier">process_text_options</span>(<span class="ruby-identifier">options</span>)
194:         <span class="ruby-identifier">font</span>.<span class="ruby-identifier">normalize_encoding!</span>(<span class="ruby-identifier">text</span>) <span class="ruby-keyword kw">unless</span> <span class="ruby-ivar">@skip_encoding</span>
195:         <span class="ruby-identifier">font_size</span>(<span class="ruby-identifier">options</span>[<span class="ruby-value">:size</span>]) { <span class="ruby-identifier">draw_text!</span>(<span class="ruby-identifier">text</span>, <span class="ruby-identifier">options</span>) }
196:       <span class="ruby-keyword kw">end</span>
197:     <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="height-of-method" class="method-detail ">
				<a name="method-i-height_of"></a>

				<div class="method-heading">
				
					<span class="method-name">height_of</span><span
						class="method-args">(string, options={})</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Gets height of text in PDF points. Same options as text(), except as noted.
Not compatible with :indent_paragraphs option
</p>
<p>
Raises <tt>Prawn::Errors::UnknownOption</tt> if <tt>:indent_paragraphs</tt>
option included and debug flag is set
</p>
					

					
					<div class="method-source-code"
						id="height-of-source">
<pre>
    <span class="ruby-comment cmt"># File lib/prawn/text.rb, line 27</span>
27:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">height_of</span>(<span class="ruby-identifier">string</span>, <span class="ruby-identifier">options</span>={})
28:       <span class="ruby-identifier">process_final_gap_option</span>(<span class="ruby-identifier">options</span>)
29:       <span class="ruby-identifier">box</span> = <span class="ruby-constant">Text</span><span class="ruby-operator">::</span><span class="ruby-constant">Box</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">string</span>,
30:                           <span class="ruby-identifier">options</span>.<span class="ruby-identifier">merge</span>(<span class="ruby-value">:height</span>   =<span class="ruby-operator">&gt;</span> <span class="ruby-value">100000000</span>,
31:                                         <span class="ruby-value">:document</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">self</span>))
32:       <span class="ruby-identifier">box</span>.<span class="ruby-identifier">render</span>(<span class="ruby-value">:dry_run</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>)
33:       <span class="ruby-identifier">height</span> = <span class="ruby-identifier">box</span>.<span class="ruby-identifier">height</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">box</span>.<span class="ruby-identifier">descender</span>
34:       <span class="ruby-identifier">height</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">box</span>.<span class="ruby-identifier">line_height</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">box</span>.<span class="ruby-identifier">leading</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">box</span>.<span class="ruby-identifier">ascender</span> <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@final_gap</span>
35:       <span class="ruby-identifier">height</span>
36:     <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="text-method" class="method-detail ">
				<a name="method-i-text"></a>

				<div class="method-heading">
				
					<span class="method-name">text</span><span
						class="method-args">(string, options={})</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
If you want text to flow onto a new page or between columns, this is the
method to use. If, instead, if you want to place bounded text outside of
the flow of a document (for captions, labels, charts, etc.), use <a
href="Text/Box.html">Text::Box</a> or its convenience method text_box.
</p>
<p>
Draws text on the page. <a href="../Prawn.html">Prawn</a> attempts to wrap
the text to fit within your current bounding box (or margin_box if no
bounding box is being used). <a href="Text.html">Text</a> will flow onto
the next page when it reaches the bottom of the bounding box. <a
href="Text.html">Text</a> wrap in <a href="../Prawn.html">Prawn</a> does
not re-flow linebreaks, so if you want fully automated text wrapping, be
sure to remove newlines before attempting to draw your string.
</p>
<pre>
  pdf.text &quot;Will be wrapped when it hits the edge of your bounding box&quot;
  pdf.text &quot;This will be centered&quot;, :align =&gt; :center
  pdf.text &quot;This will be right aligned&quot;, :align =&gt; :right
</pre>
<p>
If your font contains kerning pairs data that <a
href="../Prawn.html">Prawn</a> can parse, the  text will be kerned by
default.  You can disable this feature by passing <tt>:kerning =&gt;
false</tt>.
</p>
<h3><a href="Text.html">Text</a> Positioning Details:</h3>
<p>
The text is positioned at font.ascender below the baseline, making it easy
to use this method within bounding boxes and spans.
</p>
<h2><a href="Encoding.html">Encoding</a></h2>
<p>
Note that strings passed to this function should be encoded as UTF-8. If
you get unexpected characters appearing in your rendered document,  check
this.
</p>
<p>
If the current font is a built-in one, although the string must be encoded
as UTF-8, only characters that are available in WinAnsi are allowed.
</p>
<p>
If an empty box is rendered to your PDF instead of the character you 
wanted it usually means the current font doesn&#8217;t include that
character.
</p>
<h2>Options (default values marked in [])</h2>
<table>
<tr><td valign="top"><tt>:kerning</tt></td><td><p>
<tt>boolean</tt>. Whether or not to use kerning (if it is available with
the current font) [true]
</p>
</td></tr>
<tr><td valign="top"><tt>:size</tt></td><td><p>
<tt>number</tt>. The font size to use. [current font size]
</p>
</td></tr>
<tr><td valign="top"><tt>:style</tt></td><td><p>
The style to use. The requested style must be part of the current font
familly. [current style]
</p>
</td></tr>
<tr><td valign="top"><tt>:indent_paragraphs</tt></td><td><p>
<tt>number</tt>. The amount to indent the first line of each paragraph.
Omit this option if you do not want indenting
</p>
</td></tr>
<tr><td valign="top"><tt>:align</tt></td><td><p>
<tt>:left</tt>, <tt>:center</tt>, or <tt>:right</tt>. Alignment within the
bounding box [:left]
</p>
</td></tr>
<tr><td valign="top"><tt>:valign</tt></td><td><p>
<tt>:top</tt>, <tt>:center</tt>, or <tt>:bottom</tt>. Vertical alignment
within the bounding box [:top]
</p>
</td></tr>
<tr><td valign="top"><tt>:leading</tt></td><td><p>
<tt>number</tt>. Additional space between lines [0]
</p>
</td></tr>
<tr><td valign="top"><tt>:final_gap</tt></td><td><p>
<tt>boolean</tt>. If true, then the space between each line is included
below the last line; otherwise, document.y is placed just below the
descender of the last line printed [true] 
</p>
</td></tr>
<tr><td valign="top"><tt>:wrap_block</tt></td><td><p>
<tt>proc</tt>. A proc used for custom line wrapping. The proc must accept a
single <tt>line</tt> of text and an <tt>options</tt> hash and return the
string from that single line that can fit on the line under the conditions
defined by <tt>options</tt>. If omitted, the default wrapping proc is used.
The options hash passed into the wrap_block proc includes the following
options: 
</p>
<table>
<tr><td valign="top"><tt>:width</tt></td><td><p>
the width available for the current line of text
</p>
</td></tr>
</table>
<table>
<tr><td valign="top"><tt>:document</tt></td><td><p>
the pdf object
</p>
</td></tr>
</table>
<table>
<tr><td valign="top"><tt>:kerning</tt></td><td><p>
boolean
</p>
</td></tr>
</table>
<table>
<tr><td valign="top"><tt>:size</tt></td><td><p>
the font size
</p>
</td></tr>
</table>
</td></tr>
</table>
<p>
Raises <tt>ArgumentError</tt> if <tt>:at</tt> option included
</p>
					

					
					<div class="method-source-code"
						id="text-source">
<pre>
     <span class="ruby-comment cmt"># File lib/prawn/text.rb, line 112</span>
112:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">text</span>(<span class="ruby-identifier">string</span>, <span class="ruby-identifier">options</span>={})
113:       <span class="ruby-comment cmt"># we modify the options. don't change the user's hash</span>
114:       <span class="ruby-identifier">options</span> = <span class="ruby-identifier">options</span>.<span class="ruby-identifier">dup</span>
115:       <span class="ruby-identifier">inspect_options_for_text</span>(<span class="ruby-identifier">options</span>)
116: 
117:       <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@indent_paragraphs</span>
118:         <span class="ruby-identifier">string</span>.<span class="ruby-identifier">split</span>(<span class="ruby-value str">&quot;\n&quot;</span>).<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">paragraph</span><span class="ruby-operator">|</span>
119:           <span class="ruby-identifier">options</span>[<span class="ruby-value">:skip_encoding</span>] = <span class="ruby-keyword kw">false</span>
120:           <span class="ruby-identifier">remaining_text</span> = <span class="ruby-identifier">draw_indented_line</span>(<span class="ruby-identifier">paragraph</span>, <span class="ruby-identifier">options</span>)
121:           <span class="ruby-identifier">options</span>[<span class="ruby-value">:skip_encoding</span>] = <span class="ruby-keyword kw">true</span>
122:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">remaining_text</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">paragraph</span>
123:             <span class="ruby-comment cmt"># we were too close to the bottom of the page to print even one line</span>
124:             <span class="ruby-ivar">@bounding_box</span>.<span class="ruby-identifier">move_past_bottom</span>
125:             <span class="ruby-identifier">remaining_text</span> = <span class="ruby-identifier">draw_indented_line</span>(<span class="ruby-identifier">paragraph</span>, <span class="ruby-identifier">options</span>)
126:           <span class="ruby-keyword kw">end</span>
127:           <span class="ruby-identifier">remaining_text</span> = <span class="ruby-identifier">fill_text_box</span>(<span class="ruby-identifier">remaining_text</span>, <span class="ruby-identifier">options</span>)
128:           <span class="ruby-identifier">draw_remaining_text_on_new_pages</span>(<span class="ruby-identifier">remaining_text</span>, <span class="ruby-identifier">options</span>)
129:         <span class="ruby-keyword kw">end</span>
130:       <span class="ruby-keyword kw">else</span>
131:         <span class="ruby-identifier">remaining_text</span> = <span class="ruby-identifier">fill_text_box</span>(<span class="ruby-identifier">string</span>, <span class="ruby-identifier">options</span>)
132:         <span class="ruby-identifier">options</span>[<span class="ruby-value">:skip_encoding</span>] = <span class="ruby-keyword kw">true</span>
133:         <span class="ruby-identifier">draw_remaining_text_on_new_pages</span>(<span class="ruby-identifier">remaining_text</span>, <span class="ruby-identifier">options</span>)
134:       <span class="ruby-keyword kw">end</span>
135:     <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="text-box-method" class="method-detail ">
				<a name="method-i-text_box"></a>

				<div class="method-heading">
				
					<span class="method-name">text_box</span><span
						class="method-args">(string, options)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Draws the requested text into a box. When the text overflows the rectangle,
you can display ellipses, shrink to fit, or truncate the text. <a
href="Text.html">Text</a> boxes are independent of the document y position.
</p>
<h2><a href="Encoding.html">Encoding</a></h2>
<p>
Note that strings passed to this function should be encoded as UTF-8. If
you get unexpected characters appearing in your rendered document,  check
this.
</p>
<p>
If the current font is a built-in one, although the string must be encoded
as UTF-8, only characters that are available in WinAnsi are allowed.
</p>
<p>
If an empty box is rendered to your PDF instead of the character you 
wanted it usually means the current font doesn&#8217;t include that
character.
</p>
<h2>Options (default values marked in [])</h2>
<table>
<tr><td valign="top"><tt>:kerning</tt></td><td><p>
<tt>boolean</tt>. Whether or not to use kerning (if it is available with
the current font) [true]
</p>
</td></tr>
<tr><td valign="top"><tt>:size</tt></td><td><p>
<tt>number</tt>. The font size to use. [current font size]
</p>
</td></tr>
<tr><td valign="top"><tt>:style</tt></td><td><p>
The style to use. The requested style must be part of the current font
familly. [current style]
</p>
</td></tr>
<tr><td valign="top"><tt>:at</tt></td><td><p>
<tt>[x, y]</tt>. The upper left corner of the box
</p>
<dl>
<dt>@document.bounds.left, @document.bounds.top</dt><dd></dd>
</dl>
</td></tr>
<tr><td valign="top"><tt>:width</tt></td><td><p>
<tt>number</tt>. The width of the box
</p>
<dl>
<dt>@document.bounds.right - @at[0]</dt><dd></dd>
</dl>
</td></tr>
<tr><td valign="top"><tt>:height</tt></td><td><p>
<tt>number</tt>. The height of the box [@at[1] - @document.bounds.bottom]
</p>
</td></tr>
<tr><td valign="top"><tt>:align</tt></td><td><p>
<tt>:left</tt>, <tt>:center</tt>, or <tt>:right</tt>. Alignment within the
bounding box [:left]
</p>
</td></tr>
<tr><td valign="top"><tt>:valign</tt></td><td><p>
<tt>:top</tt>, <tt>:center</tt>, or <tt>:bottom</tt>. Vertical alignment
within the bounding box [:top]
</p>
</td></tr>
<tr><td valign="top"><tt>:rotate</tt></td><td><p>
<tt>number</tt>. The angle to rotate the text
</p>
</td></tr>
<tr><td valign="top"><tt>:rotate_around</tt></td><td><p>
<tt>:center</tt>, <tt>:upper_left</tt>, <tt>:upper_right</tt>,
<tt>:lower_right</tt>, or <tt>:lower_left</tt>. The point around which to
rotate the text [:upper_left]
</p>
</td></tr>
<tr><td valign="top"><tt>:leading</tt></td><td><p>
<tt>number</tt>. Additional space between lines [0]
</p>
</td></tr>
<tr><td valign="top"><tt>:single_line</tt></td><td><p>
<tt>boolean</tt>. If true, then only the first line will be drawn [false]
</p>
</td></tr>
<tr><td valign="top"><tt>:skip_encoding</tt></td><td><p>
<tt>boolean</tt> [false]
</p>
</td></tr>
<tr><td valign="top"><tt>:overflow</tt></td><td><p>
<tt>:truncate</tt>, <tt>:shrink_to_fit</tt>, <tt>:expand</tt>, or
<tt>:ellipses</tt>. This controls the behavior when  the amount of text
exceeds the available space
</p>
<dl>
<dt>:truncate</dt><dd></dd>
</dl>
</td></tr>
<tr><td valign="top"><tt>:min_font_size</tt></td><td><p>
<tt>number</tt>. The minimum font size to use when :overflow is set to
:shrink_to_fit (that is the font size will not be  reduced to less than
this value, even if it means that some text will be cut off). [5]
</p>
</td></tr>
<tr><td valign="top"><tt>:line_wrap</tt></td><td><p>
<tt>object</tt>. An object used for custom line
</p>
<pre>
 wrapping on a case by case basis. Note that if you
 want to change wrapping document-wide, do
 pdf.default_line_wrap = MyLineWrap.new. Your custom
 object must have a wrap_line method that accept a
 single &lt;tt&gt;line&lt;/tt&gt; of text and an
 &lt;tt&gt;options&lt;/tt&gt; hash and returns the string from 
 that single line that can fit on the line under 
 the conditions defined by &lt;tt&gt;options&lt;/tt&gt;. If 
 omitted, the line wrap object is used.
 The options hash passed into the wrap_object proc
 includes the following options: 
 &lt;tt&gt;:width&lt;/tt&gt;:: the width available for the
                   current line of text
 &lt;tt&gt;:document&lt;/tt&gt;:: the pdf object
 &lt;tt&gt;:kerning&lt;/tt&gt;:: boolean
 &lt;tt&gt;:size&lt;/tt&gt;:: the font size
</pre>
</td></tr>
</table>
<p>
Returns any text that did not print under the current settings.
</p>
<p>
NOTE: if an AFM font is used, then the returned text is encoded in WinAnsi.
Subsequent calls to <a href="Text.html#method-i-text_box">text_box</a> that
pass this returned text back into text box must include a :skip_encoding =>
true option. This is unnecessary when using TTF fonts because those operate
on UTF-8 encoding.
</p>
					

					
					<div class="method-source-code"
						id="text-box-source">
<pre>
    <span class="ruby-comment cmt"># File lib/prawn/text/box.rb, line 93</span>
93:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">text_box</span>(<span class="ruby-identifier">string</span>, <span class="ruby-identifier">options</span>)
94:       <span class="ruby-constant">Text</span><span class="ruby-operator">::</span><span class="ruby-constant">Box</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">string</span>, <span class="ruby-identifier">options</span>.<span class="ruby-identifier">merge</span>(<span class="ruby-value">:document</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">self</span>)).<span class="ruby-identifier">render</span>
95:     <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
		</div>
	
		<div id="private-instance-method-details" class="method-section section">
			<h3 class="section-header">Private Instance Methods</h3>

		
			<div id="draw-indented-line-method" class="method-detail ">
				<a name="method-i-draw_indented_line"></a>

				<div class="method-heading">
				
					<span class="method-name">draw_indented_line</span><span
						class="method-args">(string, options)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					
					

					
					<div class="method-source-code"
						id="draw-indented-line-source">
<pre>
     <span class="ruby-comment cmt"># File lib/prawn/text.rb, line 210</span>
210:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">draw_indented_line</span>(<span class="ruby-identifier">string</span>, <span class="ruby-identifier">options</span>)
211:       <span class="ruby-identifier">indent</span>(<span class="ruby-ivar">@indent_paragraphs</span>) <span class="ruby-keyword kw">do</span>
212:         <span class="ruby-identifier">fill_text_box</span>(<span class="ruby-identifier">string</span>, <span class="ruby-identifier">options</span>.<span class="ruby-identifier">dup</span>.<span class="ruby-identifier">merge</span>(<span class="ruby-value">:single_line</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>))
213:       <span class="ruby-keyword kw">end</span>
214:     <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="draw-remaining-text-on-new-pages-method" class="method-detail ">
				<a name="method-i-draw_remaining_text_on_new_pages"></a>

				<div class="method-heading">
				
					<span class="method-name">draw_remaining_text_on_new_pages</span><span
						class="method-args">(remaining_text, options)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					
					

					
					<div class="method-source-code"
						id="draw-remaining-text-on-new-pages-source">
<pre>
     <span class="ruby-comment cmt"># File lib/prawn/text.rb, line 201</span>
201:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">draw_remaining_text_on_new_pages</span>(<span class="ruby-identifier">remaining_text</span>, <span class="ruby-identifier">options</span>)
202:       <span class="ruby-keyword kw">while</span> <span class="ruby-identifier">remaining_text</span>.<span class="ruby-identifier">length</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>
203:         <span class="ruby-ivar">@bounding_box</span>.<span class="ruby-identifier">move_past_bottom</span>
204:         <span class="ruby-identifier">previous_remaining_text</span> = <span class="ruby-identifier">remaining_text</span>
205:         <span class="ruby-identifier">remaining_text</span> = <span class="ruby-identifier">fill_text_box</span>(<span class="ruby-identifier">remaining_text</span>, <span class="ruby-identifier">options</span>)
206:         <span class="ruby-keyword kw">break</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">remaining_text</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">previous_remaining_text</span>
207:       <span class="ruby-keyword kw">end</span>
208:     <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="fill-text-box-method" class="method-detail ">
				<a name="method-i-fill_text_box"></a>

				<div class="method-heading">
				
					<span class="method-name">fill_text_box</span><span
						class="method-args">(text, options)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					
					

					
					<div class="method-source-code"
						id="fill-text-box-source">
<pre>
     <span class="ruby-comment cmt"># File lib/prawn/text.rb, line 216</span>
216:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">fill_text_box</span>(<span class="ruby-identifier">text</span>, <span class="ruby-identifier">options</span>)
217:       <span class="ruby-identifier">bottom</span> = <span class="ruby-ivar">@bounding_box</span>.<span class="ruby-identifier">stretchy?</span> <span class="ruby-operator">?</span> <span class="ruby-ivar">@margin_box</span>.<span class="ruby-identifier">absolute_bottom</span> <span class="ruby-operator">:</span>
218:                                          <span class="ruby-ivar">@bounding_box</span>.<span class="ruby-identifier">absolute_bottom</span>
219: 
220:       <span class="ruby-identifier">options</span>[<span class="ruby-value">:height</span>] = <span class="ruby-identifier">y</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">bottom</span>
221:       <span class="ruby-identifier">options</span>[<span class="ruby-value">:width</span>] = <span class="ruby-identifier">bounds</span>.<span class="ruby-identifier">width</span>
222:       <span class="ruby-identifier">options</span>[<span class="ruby-value">:at</span>] = [<span class="ruby-ivar">@bounding_box</span>.<span class="ruby-identifier">left_side</span> <span class="ruby-operator">-</span> <span class="ruby-ivar">@bounding_box</span>.<span class="ruby-identifier">absolute_left</span>,
223:                       <span class="ruby-identifier">y</span> <span class="ruby-operator">-</span> <span class="ruby-ivar">@bounding_box</span>.<span class="ruby-identifier">absolute_bottom</span>]
224: 
225:       <span class="ruby-identifier">box</span> = <span class="ruby-constant">Text</span><span class="ruby-operator">::</span><span class="ruby-constant">Box</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">text</span>, <span class="ruby-identifier">options</span>)
226:       <span class="ruby-identifier">remaining_text</span> = <span class="ruby-identifier">box</span>.<span class="ruby-identifier">render</span>
227: 
228:       <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">y</span> <span class="ruby-operator">-=</span> <span class="ruby-identifier">box</span>.<span class="ruby-identifier">height</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">box</span>.<span class="ruby-identifier">descender</span>
229:       <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@final_gap</span>
230:         <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">y</span> <span class="ruby-operator">-=</span> <span class="ruby-identifier">box</span>.<span class="ruby-identifier">line_height</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">box</span>.<span class="ruby-identifier">leading</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">box</span>.<span class="ruby-identifier">ascender</span>
231:       <span class="ruby-keyword kw">end</span>
232:       <span class="ruby-identifier">remaining_text</span>
233:     <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="inspect-options-for-draw-text-method" class="method-detail ">
				<a name="method-i-inspect_options_for_draw_text"></a>

				<div class="method-heading">
				
					<span class="method-name">inspect_options_for_draw_text</span><span
						class="method-args">(options)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					
					

					
					<div class="method-source-code"
						id="inspect-options-for-draw-text-source">
<pre>
     <span class="ruby-comment cmt"># File lib/prawn/text.rb, line 235</span>
235:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">inspect_options_for_draw_text</span>(<span class="ruby-identifier">options</span>)
236:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-value">:at</span>].<span class="ruby-identifier">nil?</span>
237:         <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>, <span class="ruby-value str">&quot;The :at option is required for draw_text&quot;</span>
238:       <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">options</span>[<span class="ruby-value">:align</span>]
239:         <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>, <span class="ruby-value str">&quot;The :align option does not work with draw_text&quot;</span>
240:       <span class="ruby-keyword kw">end</span>
241:       <span class="ruby-constant">Prawn</span>.<span class="ruby-identifier">verify_options</span>(<span class="ruby-constant">VALID_OPTIONS</span>, <span class="ruby-identifier">options</span>)
242:     <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="inspect-options-for-text-method" class="method-detail ">
				<a name="method-i-inspect_options_for_text"></a>

				<div class="method-heading">
				
					<span class="method-name">inspect_options_for_text</span><span
						class="method-args">(options)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					
					

					
					<div class="method-source-code"
						id="inspect-options-for-text-source">
<pre>
     <span class="ruby-comment cmt"># File lib/prawn/text.rb, line 244</span>
244:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">inspect_options_for_text</span>(<span class="ruby-identifier">options</span>)
245:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-value">:at</span>]
246:         <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>, <span class="ruby-value str">&quot;:at is no longer a valid option with text.&quot;</span> <span class="ruby-operator">+</span>
247:                              <span class="ruby-value str">&quot;use draw_text or text_box instead&quot;</span>
248:       <span class="ruby-keyword kw">end</span>
249:       <span class="ruby-identifier">process_final_gap_option</span>(<span class="ruby-identifier">options</span>)
250:       <span class="ruby-identifier">process_indent_paragraphs_option</span>(<span class="ruby-identifier">options</span>)
251:       <span class="ruby-identifier">options</span>[<span class="ruby-value">:document</span>] = <span class="ruby-keyword kw">self</span>
252:     <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="move-text-position-method" class="method-detail ">
				<a name="method-i-move_text_position"></a>

				<div class="method-heading">
				
					<span class="method-name">move_text_position</span><span
						class="method-args">(dy)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					
					

					
					<div class="method-source-code"
						id="move-text-position-source">
<pre>
     <span class="ruby-comment cmt"># File lib/prawn/text.rb, line 264</span>
264:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">move_text_position</span>(<span class="ruby-identifier">dy</span>)
265:       <span class="ruby-identifier">bottom</span> = <span class="ruby-ivar">@bounding_box</span>.<span class="ruby-identifier">stretchy?</span> <span class="ruby-operator">?</span> <span class="ruby-ivar">@margin_box</span>.<span class="ruby-identifier">absolute_bottom</span> <span class="ruby-operator">:</span>
266:                                          <span class="ruby-ivar">@bounding_box</span>.<span class="ruby-identifier">absolute_bottom</span>
267: 
268:       <span class="ruby-ivar">@bounding_box</span>.<span class="ruby-identifier">move_past_bottom</span> <span class="ruby-keyword kw">if</span> (<span class="ruby-identifier">y</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">dy</span>) <span class="ruby-operator">&lt;</span> <span class="ruby-identifier">bottom</span>
269: 
270:       <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">y</span> <span class="ruby-operator">-=</span> <span class="ruby-identifier">dy</span>
271:     <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="process-final-gap-option-method" class="method-detail ">
				<a name="method-i-process_final_gap_option"></a>

				<div class="method-heading">
				
					<span class="method-name">process_final_gap_option</span><span
						class="method-args">(options)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					
					

					
					<div class="method-source-code"
						id="process-final-gap-option-source">
<pre>
     <span class="ruby-comment cmt"># File lib/prawn/text.rb, line 254</span>
254:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">process_final_gap_option</span>(<span class="ruby-identifier">options</span>)
255:       <span class="ruby-ivar">@final_gap</span> = <span class="ruby-identifier">options</span>[<span class="ruby-value">:final_gap</span>].<span class="ruby-identifier">nil?</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">options</span>[<span class="ruby-value">:final_gap</span>]
256:       <span class="ruby-identifier">options</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-value">:final_gap</span>)
257:     <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="process-indent-paragraphs-option-method" class="method-detail ">
				<a name="method-i-process_indent_paragraphs_option"></a>

				<div class="method-heading">
				
					<span class="method-name">process_indent_paragraphs_option</span><span
						class="method-args">(options)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					
					

					
					<div class="method-source-code"
						id="process-indent-paragraphs-option-source">
<pre>
     <span class="ruby-comment cmt"># File lib/prawn/text.rb, line 259</span>
259:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">process_indent_paragraphs_option</span>(<span class="ruby-identifier">options</span>)
260:       <span class="ruby-ivar">@indent_paragraphs</span> = <span class="ruby-identifier">options</span>[<span class="ruby-value">:indent_paragraphs</span>]
261:       <span class="ruby-identifier">options</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-value">:indent_paragraphs</span>)
262:     <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
		</div>
	

	</div>


	<div id="rdoc-debugging-section-dump" class="debugging-section">
	
		<p>Disabled; run with --debug to generate this.</p>
	
	</div>

	<div id="validator-badges">
		<p><small><a href="http://validator.w3.org/check/referer">[Validate]</a></small></p>
		<p><small>Generated with the <a href="http://deveiate.org/projects/Darkfish-Rdoc/">Darkfish
			Rdoc Generator</a> 1.1.6</small>.</p>
	</div>

</body>
</html>

